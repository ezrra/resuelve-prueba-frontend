(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(6),s=n.n(a),i=(n(12),n(13),n(3)),u=n.n(i),l=n(4),o=n(2),j=(n(15),n(0)),f=function(e){var t=e.title;return Object(j.jsx)("h2",{className:"Title",children:t})},b=(n(17),n(7)),h=(n(18),n.p+"static/media/film-poster-placeholder.9a8182eb.png"),d=function(e){var t=e.film;if(e.showShimmer)return Object(j.jsx)("div",{className:"Film-content",children:Object(j.jsx)(b.a,{height:300,width:200})});var n=t.title,r=t.producer;return Object(j.jsxs)("div",{className:"Film-content",children:[Object(j.jsx)("img",{className:"Film-image",src:h,alt:"Film"}),Object(j.jsx)("h4",{className:"Film-title",children:n}),Object(j.jsx)("h5",{className:"Film-director",children:r})]})},O={films:{title:"Films",noRecords:"No records",results:"Results"},searchField:{search:"Search"}},m=function(e){var t=e.films,n=e.loading,r=function(){if(n){for(var e=[],r=0;r<5;r++)e.push(Object(j.jsx)(d,{showShimmer:!0},r));return e}return 0===t.length?Object(j.jsx)("div",{children:O.films.noRecords}):t.map((function(e,t){return Object(j.jsx)(d,{film:e},t)}))};return Object(j.jsxs)("div",{className:"List-content",children:[Object(j.jsx)("div",{className:"Results-content",children:Object(j.jsxs)("span",{children:[O.films.results,": ",t.length]})}),Object(j.jsx)(r,{})]})},p=(n(19),function(e){var t=e.text;return t?Object(j.jsx)("div",{className:"Error-content",children:t}):null}),x=function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://ghibliapi.herokuapp.com","/films"));case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",{data:n});case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{error:"Error: ".concat(e.t0)});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),v=(n(20),function(e){var t=e.suggestions,n=e.handleSearch,c=e.loading,a=Object(r.useState)(""),s=Object(o.a)(a,2),i=s[0],u=s[1],l=Object(r.useState)([]),f=Object(o.a)(l,2),b=f[0],h=f[1],d=Object(r.useState)(!1),m=Object(o.a)(d,2),p=m[0],x=m[1],v=Object(r.useState)(0),g=Object(o.a)(v,2),S=g[0],N=g[1],y=function(){var e=function(e){x(!1),u(e.currentTarget.innerText),n(e.currentTarget.innerText)};if(!p||0===t.length||0===b.length)return null;var r=function(e){return S===e?"Suggestion-active":null};return Object(j.jsx)("ul",{className:"Suggestion-list",children:b.map((function(t,n){return Object(j.jsx)("li",{className:r(n),onClick:e,children:t},n)}))})};return Object(j.jsxs)("form",{onSubmit:function(e){n(i),e.preventDefault()},children:[Object(j.jsx)("input",{disabled:c,onKeyDown:function(e){if(!p)return!1;if(27===e.keyCode&&x(!1),40===e.keyCode&&S!==b.length&&N(S+1),38===e.keyCode&&S>=0&&N(S-1),13===e.keyCode){x(!1);var t=b[S];t&&u(t)}},className:"Search-field",onChange:function(e){var n=e.target.value;x(n.length>0),u(e.target.value);var r=function(e){var t=e.array,n=e.text;return t.filter((function(e){return new RegExp(n,"i").test(e)}))}({array:t,text:n});h(r),N(0)},placeholder:O.searchField.search,value:i}),Object(j.jsx)(y,{})]})}),g=function(){var e=Object(r.useState)(""),t=Object(o.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),s=Object(o.a)(a,2),i=s[0],b=s[1],h=Object(r.useState)([]),d=Object(o.a)(h,2),g=d[0],S=d[1],N=Object(r.useState)(!1),y=Object(o.a)(N,2),w=y[0],k=y[1],F=Object(r.useState)([]),C=Object(o.a)(F,2),E=C[0],R=C[1];return Object(r.useEffect)((function(){Object(l.a)(u.a.mark((function e(){var t,n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.next=3,x();case 3:t=e.sent,n=t.error,r=t.data,n&&c(n),r&&r.length&&(a=r.map((function(e){return e.title})),b(r),S(r),R(a)),k(!1);case 9:case"end":return e.stop()}}),e)})))()}),[]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(f,{title:O.films.title}),Object(j.jsx)(p,{text:n}),Object(j.jsx)(v,{loading:w,suggestions:E,handleSearch:function(e){if(!e)return S(i),!1;var t=function(e){var t=e.array,n=e.text,r=e.property;return t.filter((function(e){return new RegExp(n,"i").test(e[r])}))}({text:e,array:i,property:"title"});S(t)}}),Object(j.jsx)(m,{loading:w,films:g})]})};var S=function(){return Object(j.jsx)("div",{className:"App-container",children:Object(j.jsx)(g,{})})};s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(S,{})}),document.getElementById("root"))}],[[21,1,2]]]);
//# sourceMappingURL=main.5ab65e68.chunk.js.map